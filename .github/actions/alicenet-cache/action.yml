name: 'AliceNet Cache'
description: 'Cache capnpro and other artifacts (swagger)'
runs:
  using: "composite"
  steps:
  - name: "Cache capnpro and other artifacts (swagger)"
    id: alicenet-cache
    uses: actions/cache@v3
    with:
      path: |
        localrpc/swagger-bindata/bindata.go
        localrpc/swagger/localstate.swagger.json
        **/*.pb.go
        **/*.capnp.go
        **/*.pb.gw.go
        **/*_mngen.go
        **/*_mngen_test.go
      key: ${{ runner.os }}-go-${{ hashFiles('**/*.proto', './cmd/mngen/**', './localrpc/swagger/**') }}
  - name: "Build aliceNet cache [OPTIONAL]"
    if: steps.alicenet-cache.outputs.cache-hit != 'true'
    shell: bash
    run: make generate-go
